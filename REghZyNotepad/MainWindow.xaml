<Window x:Class="REghZyNotepad.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:REghZyNotepad" 
        xmlns:editor="clr-namespace:REghZyNotepad.Editor"
        xmlns:ap="clr-namespace:REghZyNotepad.AttachedProperties"
        mc:Ignorable="d"
        Title="REghZy Notepad" 
        Width="600" Height="450"
        ResizeMode="CanResizeWithGrip"
        Style="{DynamicResource CustomWindowStyle}"
        d:DataContext="{d:DesignInstance local:MainViewModel}">
    <Grid>
        <Menu VerticalAlignment="Top" Height="18" Background="{DynamicResource ControlDefaultBackground}">
            <MenuItem Header="File">
                <MenuItem Header="New" InputGestureText="Ctrl + N"                Command="{Binding NewFileCommand, Mode=OneTime}"/>
                <MenuItem Header="Open" InputGestureText="Ctrl + O"               Command="{Binding OpenFileCommand, Mode=OneTime}"/>
                <MenuItem Header="Save" InputGestureText="Ctrl + S"               Command="{Binding SaveFileCommand, Mode=OneTime}"/>
                <MenuItem Header="Save as..." InputGestureText="Ctrl + Shift + S" Command="{Binding SaveFileAsCommand, Mode=OneTime}"/>
                <Separator Style="{DynamicResource MenuItemSeparator}"/>
                <MenuItem Header="Exit" InputGestureText="Esc" Command="{Binding ExitCommand, Mode=OneTime}"/>
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Undo" InputGestureText="Ctrl + Z"         CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Undo"/>
                <MenuItem Header="Redo" InputGestureText="Ctrl + Shift + Z" CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Redo"/>
                <Separator Style="{DynamicResource MenuItemSeparator}"/>
                <MenuItem Header="Cut"    InputGestureText="Ctrl + X"       CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Cut"/>
                <MenuItem Header="Copy"   InputGestureText="Ctrl + C"       CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Copy"/>
                <MenuItem Header="Paste"  InputGestureText="Ctrl + V"       CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Paste"/>
                <MenuItem Header="Delete" InputGestureText="Del"            CommandTarget="{Binding ElementName=TextEditor}" Command="ApplicationCommands.Delete"/>
                <Separator Style="{DynamicResource MenuItemSeparator}"/>
                <MenuItem Header="Find..."        InputGestureText="Ctrl + F"         Command="{Binding FindCommand, Mode=OneTime}"/>
                <MenuItem Header="Find next"      InputGestureText="F3"               Command="{Binding FindNextCommand, Mode=OneTime}"/>
                <MenuItem Header="Find previous"  InputGestureText="Shift + F3"       Command="{Binding FindPreviousCommand, Mode=OneTime}"/>
                <MenuItem Header="Replace..."     InputGestureText="Ctrl + H"         Command="{Binding ReplaceCommand, Mode=OneTime}"/>
                <MenuItem Header="Replace All..." InputGestureText="Ctrl + Shift + H" Command="{Binding ReplaceAllCommand, Mode=OneTime}"/>
                <MenuItem Header="Goto (line)"    InputGestureText="Ctrl + G"         Command="{Binding GotoLineCommand, Mode=OneTime}"/>
            </MenuItem>
            <MenuItem Header="Format" Command="{Binding ShowFormatCommand, Mode=OneTime}"/>
            <MenuItem Header="View">
                <MenuItem Header="Nothing yet :)"/>
            </MenuItem>
            <MenuItem Header="Help">
                <MenuItem Header="About"/>
            </MenuItem>
        </Menu>
        <Grid Margin="0,18,0,0">
            <editor:REghZyTextEditor x:Name="TextEditor"
                     DataContext="{Binding NotepadEditor, UpdateSourceTrigger=PropertyChanged}"
                     Text="{Binding Document.Contents, UpdateSourceTrigger=PropertyChanged}"
                     FontSize="{Binding Format.FontSize, UpdateSourceTrigger=PropertyChanged}"
                     FontFamily="{Binding Format.Font, UpdateSourceTrigger=PropertyChanged}"
                     FontWeight="{Binding Format.Weight, UpdateSourceTrigger=PropertyChanged}"
                     TextDecorations="{Binding Format.Decoration, UpdateSourceTrigger=PropertyChanged}"
                     TextWrapping="{Binding Format.Wrapping, UpdateSourceTrigger=PropertyChanged}"
                     SelectionChanged="TextEditor_SelectionChanged"
                     ScrollViewer.CanContentScroll="False"
                     AcceptsReturn="True"
                     IsTabStop="True"
                     AcceptsTab="True"
                     Margin="0 0 0 22"
                     BorderThickness="0 1 0 1" 
                     Background="Transparent" 
                     AutoWordSelection="False"
                     IsInactiveSelectionHighlightEnabled="True"
                     SpellCheck.SpellingReform="Postreform"
                     Language="en"
                     UndoLimit="1000"
                     ap:HorizontalScrolling.UseHorizontalScrollingValue="True"
                     ScrollViewer.PanningMode="VerticalFirst"
                     HorizontalScrollBarVisibility="Visible"
                     VerticalScrollBarVisibility="Visible"
                     ScrollViewer.HorizontalScrollBarVisibility="Visible"
                     ScrollViewer.VerticalScrollBarVisibility="Visible"
                     Focusable="True" 
                     Visibility="Visible" 
                     Style="{DynamicResource REghZyTextEditorStyle}"/>
            <Grid VerticalAlignment="Bottom" Height="22" Background="{DynamicResource ControlDefaultBackground}">
                <Border HorizontalAlignment="Right" Width="15" Background="{DynamicResource ControlDefaultBorderBrush}"/>
                <DockPanel Margin="0,0,15,0" DataContext="{Binding NotepadBar, Mode=OneTime}">
                    <Separator Style="{DynamicResource VerticalSeparator}" DockPanel.Dock="Right" Margin="2 0 0 0"/>
                    <TextBlock Padding="2" 
                               Text="{Binding NotepadEditor.Document.FileSize, UpdateSourceTrigger=PropertyChanged}" 
                               VerticalAlignment="Center" 
                               DockPanel.Dock="Right"/>
                    <Separator Style="{DynamicResource VerticalSeparator}" DockPanel.Dock="Right"/>
                    <TextBlock Padding="2 2 1 2" 
                               Text="{Binding NotepadEditor.Format.FontSize, UpdateSourceTrigger=PropertyChanged, StringFormat='({0}px)'}"
                               VerticalAlignment="Center"
                               DockPanel.Dock="Right"/>
                    <TextBlock Padding="2" 
                               Text="{Binding NotepadEditor.Format.Font, UpdateSourceTrigger=PropertyChanged}" 
                               FontWeight="{Binding NotepadEditor.Format.Weight, UpdateSourceTrigger=PropertyChanged}"
                               TextDecorations="{Binding NotepadEditor.Format.Decoration, UpdateSourceTrigger=PropertyChanged}"
                               VerticalAlignment="Center"
                               DockPanel.Dock="Right"/>
                    <Separator Style="{DynamicResource VerticalSeparator}" DockPanel.Dock="Right"/>
                    <TextBlock Padding="0 0 2 0" Text="{Binding Column, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" DockPanel.Dock="Right"/>
                    <TextBlock Padding="0" Text="C" VerticalAlignment="Center" DockPanel.Dock="Right"/>
                    <TextBlock Padding="0" Text=", " VerticalAlignment="Center" DockPanel.Dock="Right"/>
                    <TextBlock Padding="0" Text="{Binding Line, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" DockPanel.Dock="Right"/>
                    <TextBlock Padding="2 0 0 0" Text="L" VerticalAlignment="Center" DockPanel.Dock="Right"/>
                    <Separator Style="{DynamicResource VerticalSeparator}" DockPanel.Dock="Right"/>
                    <TextBlock Padding="4 2 2 2" 
                               Text="{Binding NotepadEditor.Document.FilePath, UpdateSourceTrigger=PropertyChanged}"
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Stretch"/>
                </DockPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>
